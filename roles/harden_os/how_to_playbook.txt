- hosts: all
  become: true  # Assuming you need elevated privileges

  roles:
    - role: harden_os
      vars:
        ubu22_defaults: "{{ lookup('file', 'roles/harden_os/ubu22/defaults/main.yml') }}"
        rhel9_defaults: "{{ lookup('file', 'roles/harden_os/rhel9/defaults/main.yml') }}"
  tasks:
    - name: register is_container
      set_fact:
        is_target_container: false

    - name: register is_container
      set_fact:
        ansible_dir: "{{ ansible_env.PWD }}"

    - name: Include ubu22 defaults
      include_vars:
        file: roles/harden_os/ubu22/defaults/main.yml

    - name: Include ubu22 vars main.yml
      include_vars:
        file: roles/harden_os/ubu22/vars/main.yml

    - name: Include ubu22 vars is_container.yml
      include_vars:
        file: roles/harden_os/ubu22/vars/is_container.yml

    - name: Include ubu22 tasks
      include_tasks: roles/harden_os/ubu22/tasks/main.yml